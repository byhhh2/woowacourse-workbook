# 레벨로그

### 🎬 Execution Context & This

실행 컨텍스트는 코드를 실행하는 데에 필요한 환경을 제공하는 객체이다. 객체 안에는 코드 실행에 대한 변수, 함수 정보를 저장한다. 실행 컨텍스트는 스택구조로 생성, 소멸된다. 가장 최근에 추가된 실행 컨텍스트가 스택의 가장 위에 쌓이게 되고 활성화가 된다. 전역 코드로 control이 진입하면 global EC가 생성되고 스택에 쌓인다. 만약 함수 A가 호출된다면 A의 EC가 생성되고 global EC 위에 A의 EC가 쌓이게 된다. A의 실행이 종료되면 A의 EC가 소멸되고, control을 직전 컨텍스트에게 반환한다. 실행 컨텍스트에 저장된 정보를 통해 자바스크립트 엔진은 코드에 대한 여러가지 정보를 얻을 수 있고, 식별자 결정을 효율적으로 할 수 있다.

this는 현재 실행 컨텍스트를 가르킨다. this는 함수를 호출하는 방식에 따라 달라지는데, this는 기본적으로 window객체를 가르킨다. 만약 obj안 메서드에서 this를 출력한다면 this는 obj를 가르키고, 전역 코드에서 this를 출력한다면 this는 window객체를 가르킨다. 특정 객체 안에 있는 메서드이기 때문에 특정 객체를 가르킨다고 생각할 수 있지만 중요한 것은 호출할 때 this가 가르키는 것이 달라진 다는 것이다. 만약 obj의 메서드를 특정 변수에 저장하고 그 변수를 전역 코드에서 호출할 경우 this는 window 객체를 가르키게 된다. 이는 실행 컨텍스트가 실행되는 순간 정해지기 때문에 this의 값이 동적으로 window객체로 변하게 되는 것이다.

### 🎬 SPA

전통적인 웹은 여러 페이지로 구성이 되어있다. URL이 변경될 때마다 서버에게 새로운 페이지를 요청하고 이를 서버로부터 전달 받는다. 하지만, 웹에 많은 컨텐츠가 존재하게 되면서 페이지를 전환할 때마다 서버로부터 새로운 페이지를 전달 받는 일이 속도적인 측면에서 문제가 됐다. 이를 SSR방식이라고 하는데, Server Side Rendering의 준말이다. 즉, 서버에서 페이지를 구성하고 보여준다는 의미이다. 서버에서 웹 페이지의 모든 정보를 담아 클라이언트에게 넘겨주기 때문에, 이 방식은 SEO를 구성하기가 쉽다.

서버의 트래픽을 감소시키기 위한 CSR 방식이 있는데, 이는 Client Side Rendering의 준말로 렌더링을 클라이언트에서 맡는다. 사용자의 요청이 있을 때, 서버에게 필요한 데이터만 요구, 전달받고 자바스크립트로 HTML을 그린다. 이 방식은 서버의 트래픽을 감소시킬 수는 있지만, 페이지를 한번에 그리지 않기 때문에 SEO 구성에서 불리하다. 만약 자바스크립트를 해석하지 못하는 크롤러라면 페이지의 정보를 받아갈 수 없다. 또 자바스크립트가 화면을 그릴 때까지의 시간 동안 사용자는 빈화면을 보고 있을 수 밖에 없다. 이는 UX측면에서 좋지 않은 경험을 준다.

SPA는 주로 CSR의 방식을 사용한다. SPA는 Single Page Application의 준말로 페이지가 하나인 어플리케이션이라는 뜻이다. 즉, 하나의 페이지만 존재하고 컨텐츠는 자바스크립트를 통해 동적으로 변경한다. SPA는 자바스크립트를 통해 컨텐츠를 갈아끼우다 보니, history를 직접적으로 조작해야한다. history API를 통해 페이지 이동이 일어난 것처럼 표현하면서, URL이 바뀌었을 때 서버로의 요청을 막고 history state에 저장된 정보로 필요한 데이터만 서버로 요청을 한다.
